<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel='stylesheet' type='text/css' href='css/style.css' />
    <script type='text/javascript' src='js/functions.js'></script>
    <title>Arkivet</title>
    <script type='text/javascript'>
        var GET = getGETvalues();
        if(!GET.lang){ //Default the language to norwegian unless specified
            GET.lang = "no";
        }

        function getContent(lang="no"){ //Defaults to norwegian unless argument is specified
            //New request object
            let request = new XMLHttpRequest();
            //Where we want to put new elements
            let content = document.getElementById('content');

            request.onreadystatechange = function(){ //What happens when the request changes state a.k.a what we do when we get the response
                if(this.readyState == 4){ //readyState 4 = response ready
                    content.innerHTML = ""; //clear the previous content
                    let data = JSON.parse(this.response); //convert text to JSON
                    //Choose language
                    if(lang == "no"){
                        data = data.no;
                    }else if(lang == "en"){
                        data = data.en;
                    }

                    //Create an element and append it to content
                    let header = document.createElement('h1');
                    header.innerText = data.title;
                    content.appendChild(header);

                    for(let i = 0; i < data.paragraphs.length; i++){
                        let para = document.createElement('p');
                        para.innerText = data.paragraphs[i];
                        content.appendChild(para);
                    }
                }
            }

            //Open and send the request
            request.open('GET','data/hjelp_oss.json',true);
            request.send();
        }
    </script>
</head>
<body>
    <div id='container'>
        <div id='header'>Header goes here</div>
        <div id='content'><script>getContent(GET.lang)</script></div>
        <div id='footer'>Footer goes here</div>
    </div>
</body>
</html>
